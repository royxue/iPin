<script>
  var map = new BMap.Map("event-map");
  <% events.each do |event| %>
  var event_<%= event.id %> = new BMap.Marker(new BMap.Point(<%= event.latitude %>, <%= event.longitude %>));
  map.addOverlay(event_<%= event.id %>);
  <% end %>
  map.centerAndZoom(new BMap.Point(<%= events.first.latitude %>, <%= events.first.longitude %>), 11);  // 初始化地图,设置中心点坐标和地图级别
  map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
  map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的
  map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
</script>